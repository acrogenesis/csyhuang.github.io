<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Installing Python Library for downloading ERA-Interim Data &middot; Shao Ying (Clare) Huang
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>PhD candidate (Atmospheric Sciences) in UChicago. Love coding, music and writing.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/presentations/">Conference Presentations</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/publications/">Publications</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/research/">Academic Research</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/tools/">Handy Tools</a>
        
      
    

<!--    <a class="sidebar-nav-item" href="/archive/v1.0.0.zip">Download</a> -->
    <a class="sidebar-nav-item" href="http://github.com/csyhuang/"  target="_blank">Github</a>
<!--    <span class="sidebar-nav-item">Currently v1.0.0</span> --->
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2017 Shao Ying (Clare) Huang. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Shao Ying (Clare) Huang</a>
            <small>Geophysical Fluid Dynamicist | Data Scientist</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Installing Python Library for downloading ERA-Interim Data</h1>
  <span class="post-date">13 Jun 2016</span>
  <p>(1) Installing the package requires the python Setuptools. You can set it up locally with the command:</p>

<blockquote>
  <p>wget https://bootstrap.pypa.io/ez_setup.py -O - | python - –user</p>
</blockquote>

<p>(2) Download the Python library package and unzip it (You can do it in any directory)</p>
<blockquote>
  <p>wget https://software.ecmwf.int/wiki/download/attachments/56664858/ecmwf-api-client-python.tgz
tar zxf ecmwf-api-client-python.tgz</p>
</blockquote>

<p>You shall see four items extracted:</p>
<ul>
  <li>example.py</li>
  <li>ecmwfapi/__init__.py</li>
  <li>ecmwfapi/api.py</li>
  <li>setup.py</li>
</ul>

<p>(3) In the directory with these four items, install the package with:</p>
<blockquote>
  <p>python setup.py install –user</p>
</blockquote>

<p>(4) To use the sample script, you need an API key ( .ecmwfapirc ) placed in your home directory. You can retrieve that by logging in: https://api.ecmwf.int/v1/key/
Create a file named “.ecmwfapirc” in your home directory and put in the content shown on the page:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"url"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.ecmwf.int/v1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"(...)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"(...)"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>(5) After doing that, in the directory with the sample script example.py, you can test the package by running it:</p>
<blockquote>
  <p>python example.py</p>
</blockquote>

<p>You should see it successfully retrieves a .grib file if the package has been set up properly.</p>

<p>(6) To download python script for retrieving ERA-Interim netCDF files, there are sample script available here (look under “Same request NetCDF format”):
[https://software.ecmwf.int/wiki/display/WEBAPI/Python+ERA-interim+examples]</p>

<p>In fact, on the ECMWF Public Dataset web interface page you retrieve ERA-Interim data, after you select the subset of data, instead of pressing “Retrieve NetCDF”, there is another button named “View the MARS request”, and it will show how the python script for retrieving that dataset looks like.</p>

<p>I learnt the above steps on these pages:</p>
<ul>
  <li><a href="https://software.ecmwf.int/wiki/display/WEBAPI/Access+ECMWF+Public+Datasets#AccessECMWFPublicDatasets-python">ECMWF python library</a></li>
  <li><a href="https://pypi.python.org/pypi/setuptools">Python setuptool</a></li>
</ul>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2017/05/12/switching-to-jekyll/">
            Switching to Jekyll
            <small>12 May 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/02/12/jekyll-on-windows/">
            Installation of Jekyll on Windows 10
            <small>12 Feb 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

<div>
<a href="javascript:history.back()"> << Previous Page</a>
</div>
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
